{"version":3,"sources":["containers/Purchase/components/PurchaseForm/index.js","components/Tip/index.js","containers/Purchase/index.js","components/Header/index.js"],"names":["PurchaseForm","handleOrderSubtract","props","quantity","setOrderQuantity","handleOrderAdd","handleInputChange","e","value","parseInt","target","this","products","detail","totalPrice","phone","handleOrderSubmit","className","map","index","name","key","htmlFor","onClick","type","onChange","Component","Tip","msg","handleConfirm","Purchase","handleBack","history","goBack","hideTip","purchaseActions","push","submitOrder","match","params","id","product","detailActions","fetchProduct","isShowTip","Header","title","onBack","withRouter","connect","state","getOrderQuantity","getIsShowTip","getTotalPrice","getProduct","getUsername","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/10.75a15201.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass PurchaseForm extends Component {\n  handleOrderSubtract = () => {\n    const { quantity, setOrderQuantity } = this.props;\n    if (quantity <= 1) {\n      setOrderQuantity(1);\n    } else {\n      setOrderQuantity(quantity - 1);\n    }\n  };\n  handleOrderAdd = () => {\n    const { quantity, setOrderQuantity } = this.props;\n    setOrderQuantity(quantity + 1);\n  };\n  handleInputChange = e => {\n    const value = parseInt(e.target.value);\n    const { setOrderQuantity } = this.props;\n\n    if (value <= 1) {\n      setOrderQuantity(1);\n    } else {\n      setOrderQuantity(value);\n    }\n  };\n  render() {\n    const {\n      detail: { products },\n      quantity,\n      totalPrice,\n      phone,\n      handleOrderSubmit\n    } = this.props;\n\n    return (\n      <div className=\"purchase-form\">\n        <ul className=\"purchase-form__products\">\n          {products.map(({ name, quantity }, index) => (\n            <li key={index} className=\"purchase-form__product\">\n              <span className=\"purchase-form__product-name\">{name}</span>\n              <span className=\"purchase-form__product-quantity\">\n                x{parseInt(quantity)}\n              </span>\n            </li>\n          ))}\n        </ul>\n        <div className=\"purchase-form__group\">\n          <div className=\"purchase-form__item\">\n            <label htmlFor=\"\" className=\"purchase-form__label\">\n              数量\n            </label>\n            <div className=\"purchase-form__value purchase-form__input-wrapper\">\n              <span\n                className=\"purchase-form__btn--subtract\"\n                onClick={this.handleOrderSubtract}\n              >\n                -\n              </span>\n              <input\n                type=\"number\"\n                value={quantity}\n                className=\"purchase-form__input\"\n                onChange={this.handleInputChange}\n              />\n              <span\n                className=\"purchase-form__btn--add\"\n                onClick={this.handleOrderAdd}\n              >\n                +\n              </span>\n            </div>\n          </div>\n          <div className=\"purchase-form__item\">\n            <span className=\"purchase-form__label\">小计</span>\n            <span className=\"purchase-form__value purchase-form__price\">\n              ¥{totalPrice}\n            </span>\n          </div>\n          <div className=\"purchase-form__item\">\n            <label htmlFor=\"\" className=\"purchase-form__label\">\n              手机号码\n            </label>\n            <span className=\"purchase-form__value purchase-form__phone\">\n              {phone}\n            </span>\n          </div>\n        </div>\n        <ul className=\"purchase-form__advantages\">\n          <li className=\"purchase-form__advantage\">\n            <i className=\"purchase-form__icon\"></i>\n            <span>支持随时退</span>\n          </li>\n          <li className=\"purchase-form__advantage\">\n            <i className=\"purchase-form__icon\"></i>\n            <span>支持过期退</span>\n          </li>\n        </ul>\n        <span className=\"purchase-form__submit\" onClick={handleOrderSubmit}>\n          提交订单\n        </span>\n      </div>\n    );\n  }\n}\n\nexport default PurchaseForm;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass Tip extends Component {\n  render() {\n    const { msg, handleConfirm } = this.props;\n    return (\n      <div className=\"tip\">\n        <div className=\"tip__box\">\n          <div className=\"tip__msg\">{msg}</div>\n          <div className=\"tip__btns\">\n            <button\n              type=\"button\"\n              className=\"tip__btn tip__btn--confirm\"\n              onClick={handleConfirm}\n            >\n              确定\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Tip;\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport Header from \"../../components/Header\";\nimport PurchaseForm from \"./components/PurchaseForm\";\nimport Tip from \"../../components/Tip\";\nimport {\n  getOrderQuantity,\n  getIsShowTip,\n  getTotalPrice,\n  getProduct,\n  actions as purchaseActions\n} from \"../../redux/modules/purchase\";\nimport { getUsername } from \"../../redux/modules/login\";\nimport { actions as detailActions } from \"../../redux/modules/detail\";\n\nclass Purchase extends Component {\n  handleBack = () => {\n    this.props.history.goBack();\n  };\n  handleConfirm = () => {\n    const { hideTip } = this.props.purchaseActions;\n    hideTip();\n    this.props.history.push(\"/user\");\n  };\n  handleOrderSubmit = () => {\n    const { submitOrder } = this.props.purchaseActions;\n    const productId = this.props.match.params.id;\n    submitOrder(productId);\n  };\n  componentDidMount() {\n    const { product } = this.props;\n    if (!product) {\n      this.props.detailActions.fetchProduct(this.props.match.params.id);\n    }\n  }\n  componentWillUnmount() {\n    this.props.purchaseActions.setOrderQuantity(1);\n  }\n  render() {\n    const { product, quantity, isShowTip, totalPrice, phone } = this.props;\n    const { setOrderQuantity } = this.props.purchaseActions;\n    return (\n      <div className=\"purchase\">\n        <Header title=\"下单\" onBack={this.handleBack} />\n        {product && (\n          <PurchaseForm\n            detail={product.detail}\n            quantity={quantity}\n            totalPrice={totalPrice}\n            phone={phone}\n            setOrderQuantity={setOrderQuantity}\n            handleOrderSubmit={this.handleOrderSubmit}\n          />\n        )}\n        {isShowTip && <Tip msg=\"购买成功\" handleConfirm={this.handleConfirm} />}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => ({\n  quantity: getOrderQuantity(state),\n  isShowTip: getIsShowTip(state),\n  totalPrice: getTotalPrice(state, props.match.params.id),\n  product: getProduct(state, props.match.params.id),\n  phone: getUsername(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  purchaseActions: bindActionCreators(purchaseActions, dispatch),\n  detailActions: bindActionCreators(detailActions, dispatch)\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Purchase)\n);\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass Header extends Component {\n  render() {\n    const { className, title, onBack } = this.props;\n\n    return (\n      <div className=\"base-header\">\n        <span\n          className={`base-header__back ${className}`}\n          onClick={onBack}\n        >\n          返回\n        </span>\n        <h2 className=\"base-header__title\">{title}</h2>\n      </div>\n    );\n  }\n}\n\nexport default Header;\n"],"sourceRoot":""}