{"version":3,"sources":["containers/Search/components/SearchBox/index.js","containers/Search/components/SearchKeywords/index.js","containers/Search/components/SearchHistory/index.js","containers/Search/index.js"],"names":["SearchBox","handleInputChange","e","text","target","value","trim","props","setText","handleCancel","clearText","history","goBack","handleKeyUp","keyCode","handleEnter","this","className","type","placeholder","onChange","onKeyUp","onClick","Component","withRouter","SearchKeywords","searchKeywords","data","handleClick","map","word","key","id","keyword","SearchHistory","searchHistories","clearSearchHistory","item","index","Search","searchActions","addSearchHistory","fetchSearchedShops","push","length","fetchSearchKeywords","connect","state","getText","getSearchHistories","getSearchKeywords","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/8.eace762c.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./style.css\";\n\nclass SearchBox extends Component {\n  handleInputChange = e => {\n    const text = e.target.value.trim();\n    this.props.setText(text);\n  };\n  handleCancel = () => {\n    this.props.clearText();\n    this.props.history.goBack();\n  };\n  handleKeyUp = e => {\n    if (e.keyCode === 13) {\n      this.props.handleEnter(this.props.text);\n    }\n  };\n  render() {\n    const { text, clearText } = this.props;\n\n    return (\n      <div className=\"search-box\">\n        <div className=\"search-box__container\">\n          <input\n            className=\"search-box__input\"\n            type=\"text\"\n            value={text}\n            placeholder=\"输入商户名、地点\"\n            onChange={this.handleInputChange}\n            onKeyUp={this.handleKeyUp}\n          />\n          {text && (\n            <i className=\"search-box__icon--clear\" onClick={clearText}></i>\n          )}\n          <button\n            className=\"search-box__btn--cancel\"\n            type=\"button\"\n            onClick={this.handleCancel}\n          >\n            取消\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(SearchBox);\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass SearchKeywords extends Component {\n  render() {\n    const searchKeywords = this.props.data;\n    const { handleClick } = this.props;\n    return (\n      <div className=\"search-keywords\">\n        <ul className=\"search-keywords__list\">\n          {searchKeywords.map(word => (\n            <li\n              className=\"search-keywords__item\"\n              key={word.id}\n              onClick={() => handleClick(word.keyword)}\n            >\n              {word.keyword}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default SearchKeywords;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass SearchHistory extends Component {\n  render() {\n    const searchHistories = this.props.data;\n    const { clearSearchHistory } = this.props;\n\n    return (\n      <div className=\"search-history\">\n        <h3 className=\"search-history__title\">搜索记录</h3>\n        <ul className=\"search-history__list\">\n          {searchHistories.map((item, index) => (\n            <li className=\"search-history__item\" key={index}>\n              {item.text}\n            </li>\n          ))}\n        </ul>\n        <p className=\"search-history__btn--clear\" onClick={clearSearchHistory}>\n          清除搜索记录\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default SearchHistory;\n","import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./style.css\";\nimport SearchBox from \"./components/SearchBox\";\nimport SearchKeywords from \"./components/SearchKeywords\";\nimport SearchHistory from \"./components/SearchHistory\";\nimport {\n  actions as searchActions,\n  getText,\n  getSearchHistories,\n  getSearchKeywords\n} from \"../../redux/modules/search\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\n\nclass Search extends Component {\n  handleEnter = text => {\n    const { addSearchHistory, fetchSearchedShops } = this.props.searchActions;\n\n    addSearchHistory(text);\n    fetchSearchedShops(text);\n    this.props.history.push(\"/search_result\");\n  };\n  handleClick = text => {\n    const {\n      setText,\n      addSearchHistory,\n      fetchSearchedShops\n    } = this.props.searchActions;\n\n    setText(text);\n    addSearchHistory(text);\n    fetchSearchedShops(text);\n    this.props.history.push(\"/search_result\");\n  };\n  clearSearchHistory = () => {\n    const { clearText, clearSearchHistory } = this.props.searchActions;\n    clearSearchHistory();\n    clearText();\n  };\n  componentDidMount() {\n    if (this.props.searchKeywords.length === 0) {\n      this.props.searchActions.fetchSearchKeywords();\n    }\n  }\n  render() {\n    const { text, searchHistories, searchKeywords } = this.props;\n    const { setText, clearText } = this.props.searchActions;\n\n    return (\n      <div className=\"search\">\n        <SearchBox\n          text={text}\n          setText={setText}\n          clearText={clearText}\n          handleEnter={this.handleEnter}\n        />\n        <SearchKeywords data={searchKeywords} handleClick={this.handleClick} />\n        {searchHistories.length !== 0 && (\n          <SearchHistory\n            data={searchHistories}\n            clearSearchHistory={this.clearSearchHistory}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  text: getText(state),\n  searchHistories: getSearchHistories(state),\n  searchKeywords: getSearchKeywords(state)\n});\n\nconst mapDispatchToProps = dispatch => ({\n  searchActions: bindActionCreators(searchActions, dispatch)\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));\n"],"sourceRoot":""}