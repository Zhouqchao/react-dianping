(this["webpackJsonpreact-dianping"]=this["webpackJsonpreact-dianping"]||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return O}));var r=n(15),c=n(1),u=n(14),i=n(4),a=n(5),o={id:"id",name:"orders"},s={ALL:0,CONSUMED:1,TO_PAY:2,AVAILABLE:3,REFUND:4},d={PATCH_ORDER_REQUEST:"ORDERS/patch_ORDER_REQUEST",PATCH_ORDER_SUCCESS:"ORDERS/patch_ORDER_SUCCESS",PATCH_ORDER_FAILURE:"ORDERS/patch_ORDER_FAILURE"},l={patchOrder:function(e,t){return{types:[d.PATCH_ORDER_REQUEST,d.PATCH_ORDER_SUCCESS,d.PATCH_ORDER_FAILURE],callAPI:function(){return Object(i.b)(a.a.patchOrder(e),{commentId:t})}}}},f=Object(u.a)(o.name);t.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ADD_COMMENT:return Object(c.a)(Object(c.a)({},e),{},Object(r.a)({},t.id,Object(c.a)(Object(c.a)({},e[t.id]),{},{commentId:t.commentId})));case d.ADD_ORDER:return Object(c.a)(Object(c.a)({},e),{},Object(r.a)({},t.id,Object(c.a)(Object(c.a)({},t.order),{},{id:t.id})));case d.PATCH_ORDER_REQUEST:case d.PATCH_ORDER_SUCCESS:case d.PATCH_ORDER_FAILURE:return e;default:return f(e,t)}};var O=function(e){return e.entities.orders}},13:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(14),c={id:"id",name:"products"},u=Object(r.a)(c.name);t.a=u;var i=function(e,t){var n=e.entities.products[t];return n&&n.detail&&n.purchaseNotes?n:null}},14:function(e,t,n){"use strict";var r=n(1);t.a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return n.response&&n.response[e]?Object(r.a)(Object(r.a)({},t),n.response[e]):t}}},20:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));var r=n(14),c={id:"id",name:"shops"},u=Object(r.a)(c.name);t.a=u;var i=function(e,t){return e.entities.shops[t]}},26:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return m}));var r=n(1),c=n(4),u=n(5),i={password:"",username:localStorage.getItem("username")||"",logged:localStorage.getItem("logged")||!1,isFetching:!1},a="LOGIN_REQUEST",o="LOGIN_SUCCESS",s="LOGIN_FAILURE",d="LOGOUT",l="SET_USERNAME",f="SET_PASSWORD",O={loginFailure:function(e){return{type:s,error:e}},login:function(){return function(e,t){var n=t().login,r=n.username,i=n.password;return e({type:a}),r&&i?(e({type:a}),Object(c.c)(u.a.login(),{username:r,password:i}).then((function(t){var n=t.username;return e({type:o,username:n})}),(function(t){return e({type:s,error:t})}))):e(O.loginFailure("\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\uff01"))}},setUsername:function(e){return{type:l,username:e}},setPassword:function(e){return{type:f,password:e}},logout:function(){return{type:d}}},E=function(e){var t=e.username,n=e.logged;localStorage.setItem("logged",n),localStorage.setItem("username",t)},h=function(){localStorage.removeItem("logged"),localStorage.removeItem("username")};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!0});case o:return E({username:t.username,logged:!0}),Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,logged:!0});case s:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,logged:!1});case d:return h(),Object(r.a)(Object(r.a)({},e),{},{username:"",password:"",logged:!1});case l:return Object(r.a)(Object(r.a)({},e),{},{username:t.username});case f:return Object(r.a)(Object(r.a)({},e),{},{password:t.password});default:return e}};var p=function(e){return e.login.username},b=function(e){return e.login.password},m=function(e){return e.login.logged}},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return c}));var r=n(14),c={id:"id",name:"keywords"},u=Object(r.a)(c.name);t.a=u},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m}));var r=n(1),c=n(4),u=n(5),i=n(6),a=n(20),o=n(13),s={product:{isFetching:!1,id:null},relatedShop:{isFetching:!1,id:null}},d="DETAIL/FETCH_PRODUCT_REQUEST",l="DETAIL/FETCH_PRODUCT_SUCCESS",f="DETAIL/FETCH_PRODUCT_ERROR",O="DETAIL/FETCH_SHOP_REQUEST",E="DETAIL/FETCH_SHOP_SUCCESS",h="DETAIL/FETCH_SHOP_ERROR",p={fetchProduct:function(e){return{types:[d,l,f],callAPI:function(){return Object(c.a)(u.a.getProductDetail(e))},schema:o.c}},fetchShopById:function(e){return{types:[O,E,h],callAPI:function(){return Object(c.a)(u.a.getShop(e))},schema:a.c}}},b=function(e,t){return Object(o.b)(e,t)},m=function(e,t){var n=e.entities.products[t],r=n?n.nearestShop:null;return r?Object(a.b)(e,r):null};t.b=Object(i.c)({product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.product,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!0});case l:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,id:t.id});case f:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,id:null});default:return e}},relatedShop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.relatedShop,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!0});case E:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,id:t.id});case h:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,id:null});default:return e}}})},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"g",(function(){return _})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return T})),n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return A}));var r=n(15),c=n(1),u=n(35),i=n(6),a=n(4),o=n(5),s=n(29),d=n(20),l={text:"",histories:[],keywords:{isFetching:!1,ids:[]},searchedShopsByKeyword:{}},f="SEARCH/SET_TEXT",O="SEARCH/CLEAR_TEXT",E="SEARCH/ADD_SEARCH_HISTORY",h="SEARCH/CLEAR_SEARCH_HISTORY",p="SEARCH/FETCH_SEARCH_KEYWORDS_REQUEST",b="SEARCH/FETCH_SEARCH_KEYWORDS_SUCCESS",m="SEARCH/FETCH_SEARCH_KEYWORDS_FAILURE",S="FETCH_SEARCHED_SHOPS_REQUEST",g="FETCH_SEARCHED_SHOPS_SUCCESS",j="FETCH_SEARCHED_SHOPS_FAILURE",R={setText:function(e){return{type:f,text:e}},clearText:function(){return{type:O}},addSearchHistory:function(e){return{type:E,text:e}},clearSearchHistory:function(){return{type:h}},fetchSearchKeywords:function(){return{types:[p,b,m],schema:s.b,callAPI:function(){return Object(a.a)(o.a.getSearchKeywords())}}},fetchSearchedShops:function(e){return{types:[S,g,j],schema:d.c,shouldCallAPI:function(t){return!t.search.searchedShopsByKeyword[e]},callAPI:function(){return Object(a.a)(o.a.getSearchedShops(e))},payload:{text:e}}}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,ids:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(c.a)(Object(c.a)({},e),{},{isFetching:!0});case g:return Object(c.a)(Object(c.a)({},e),{},{isFetching:!1,ids:t.response.ids});case j:return Object(c.a)(Object(c.a)({},e),{},{isFetching:!1});default:return e}};t.b=Object(i.c)({text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.text,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.text;case O:return"";default:return e}},histories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.histories,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:var n=e.filter((function(e){return e.text!==t.text}));return[{text:t.text,time:Date.now()}].concat(Object(u.a)(n));case h:return[];default:return e}},keywords:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.keywords,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(c.a)(Object(c.a)({},e),{},{isFetching:!0});case b:return Object(c.a)(Object(c.a)({},e),{},{isFetching:!1,ids:Object(u.a)(t.response.ids)});case m:return Object(c.a)(Object(c.a)({},e),{},{isFetching:!1,ids:[]});default:return e}},searchedShopsByKeyword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.searchedShopsByKeyword,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:case g:case j:return Object(c.a)(Object(c.a)({},e),{},Object(r.a)({},t.text,C(e[t.text],t)));default:return e}}});var _=function(e){return e.search.text},v=function(e){return e.search.histories},T=function(e){return e.search.keywords.ids.map((function(t){return e.entities.keywords[t]}))},y=function(e){var t=e.search.histories[0];return t?e.search.searchedShopsByKeyword[t.text].ids.map((function(t){return e.entities.shops[t]})):[]},A=function(e){var t=e.search.histories[0];return t?t.text:""}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return U})),n.d(t,"e",(function(){return D})),n.d(t,"d",(function(){return F})),n.d(t,"f",(function(){return w})),n.d(t,"h",(function(){return H})),n.d(t,"i",(function(){return P})),n.d(t,"g",(function(){return L})),n.d(t,"j",(function(){return M})),n.d(t,"c",(function(){return N}));var r=n(1),c=n(30),u=n(6),i=n(4),a=n(5),o=n(12),s={currentTab:0,orders:{isFetching:!1,ids:[]},showConfirm:!1,isShowCommentSection:!1,currentOrder:{id:null,isDeleting:!1,isCommenting:!1,comment:"",star:0,commentId:null}},d="USER/FETCH_ORDERS_REQUEST",l="USER/FETCH_ORDERS_SUCCESS",f="USER/FETCH_ORDERS_FAILURE",O="USER/SET_CURRENT_TAB",E="USER/SET_SHOW_CONFIRM",h="USER/DELETE_ORDER_REQUEST",p="USER/DELETE_ORDER_SUCCESS",b="USER/DELETE_ORDER_FAILURE",m="USER/MOCK_DELETE_ORDER",S="USER/SET_CURRENT_ORDER_ID",g="USER/SET_CURRENT_ORDER_COMMENT_ID",j="USER/SHOW_COMMENT_SECTION",R="USER/HIDE_COMMENT_SECTION",C="USER/SET_COMMENT",_="USER/SET_STAR",v="USER/POST_COMMENT_REQUEST",T="USER/POST_COMMENT_SUCCESS",y="USER/POST_COMMENT_FAILURE",A="USER/RESET_CURRENT_ORDER",U={getOrders:function(){return{types:[d,l,f],shouldCallAPI:function(){return!0},callAPI:function(){return Object(i.a)(a.a.getOrders())},schema:o.e}},resetCurrentOrder:function(){return{type:A}},deleteOrder:function(e){return{types:[h,p,b],callAPI:function(){return Object(i.d)(a.a.deleteOrder(e))}}},showCommentSection:function(){return{type:j,isShowCommentSection:!0}},hideCommentSection:function(){return{type:R,isShowCommentSection:!1}},setComment:function(e){return{type:C,comment:e}},setStar:function(e){return{type:_,star:e}},postCommentRequest:function(){return{type:v}},postCommentSuccess:function(e){var t=e.comment,n=e.star,r=e.id,c=e.commentId;return{type:T,comment:t,star:n,id:r,commentId:c}},commentOrder:function(e){return{types:[v,T,y],callAPI:function(){return Object(i.c)(a.a.addComment(),e)}}},setCurrentTab:function(e){return{type:O,tab:e}},setShowConfirm:function(e){return{type:E,showConfirm:e}},setCurrentOrderId:function(e){return{type:S,id:e}},setCurrentOrderCommentId:function(e){return{type:g,orders:e}}};t.b=Object(u.c)({currentTab:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.currentTab,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.tab;default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.orders,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!0});case l:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,ids:t.response.ids});case f:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,ids:[]});case m:var n=e.ids.filter((function(e){return e!==t.id}));return Object(r.a)(Object(r.a)({},e),{},{ids:n});default:return e}},showConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.showConfirm,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.showConfirm;default:return e}},currentOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.currentOrder,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(r.a)(Object(r.a)({},e),{},{isCommenting:!0});case T:case y:return Object(r.a)(Object(r.a)({},e),{},{isCommenting:!1});case S:return Object(r.a)(Object(r.a)({},e),{},{id:t.id});case g:var n=e.id,c=t.orders.find((function(e){return e.id===n})).commentId||null;return Object(r.a)(Object(r.a)({},e),{},{commentId:c});case h:return Object(r.a)(Object(r.a)({},e),{},{isDeleting:!0});case p:case b:return Object(r.a)(Object(r.a)({},e),{},{isDeleting:!1});case _:return Object(r.a)(Object(r.a)({},e),{},{star:t.star});case C:return Object(r.a)(Object(r.a)({},e),{},{comment:t.comment});case A:return Object(r.a)(Object(r.a)({},e),{},{id:null,comment:"",star:0,commentId:null});default:return e}},isShowCommentSection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.isShowCommentSection,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:case R:return t.isShowCommentSection;default:return e}}});var I=[o.a.ALL,o.a.TO_PAY,o.a.AVAILABLE,o.a.REFUND],D=function(e){return e.user.currentTab},F=function(e){return e.user.currentOrder},w=function(e){return e.user.orders.isFetching},H=Object(c.a)([o.d,function(e){return e.user.orders.ids},D],(function(e,t,n){var r=I[n],c=t.map((function(t){return e[t]}));return 0===r?c:c.filter((function(e){return e.type===r}))})),P=function(e){return e.user.showConfirm},L=function(e){return e.user.isShowCommentSection},M=function(e){var t=e.user.currentOrder.commentId;return t?e.entities.comments[t]&&e.entities.comments[t].star:e.user.currentOrder.star},N=function(e){var t=e.user.currentOrder.commentId;return t?e.entities.comments[t]&&e.entities.comments[t].comment:e.user.currentOrder.comment}},4:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s}));var r=n(55),c=n.n(r).a.create({headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});c.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),c.interceptors.response.use((function(e){return u(e)}),(function(e){return Promise.reject(e)}));var u=function(e){return[200,201,206].includes(e.status)?Promise.resolve(e.data):Promise.reject({error:{message:"Request failed due to server error"}})},i=function(e,t){return c.get(e,t)},a=function(e,t){return c.post(e,t)},o=function(e,t){return c.patch(e,t)},s=function(e){return c.delete(e)}},5:function(e,t,n){"use strict";t.a={login:function(){return"/login"},getProductList:function(e,t,n){return"/product_".concat(e,"?_page=").concat(t,"&_limit=").concat(n)},getProductDetail:function(e){return"/product_details/".concat(e)},getShop:function(e){return"/shops/".concat(e)},getSearchKeywords:function(){return"/keywords"},getSearchedShops:function(e){return"/searched_shops?keyword=".concat(e)},getOrders:function(){return"/orders?_sort=id&order=desc"},addOrder:function(e){return"/orders"},deleteOrder:function(e){return"/orders/".concat(e)},addComment:function(){return"/comments"},patchOrder:function(e){return"/orders/".concat(e)}}},51:function(e,t,n){"use strict";n.d(t,"f",(function(){return S})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return j})),n.d(t,"e",(function(){return R})),n.d(t,"c",(function(){return C}));var r=n(1),c=n(4),u=n(5),i=n(13),a=n(6),o="likes",s="discounts",d=3,l=3,f={likes:{isFetching:!1,pageCount:0,ids:[]},discounts:{isFetching:!1,ids:[]}},O="HOME/FETCH_LIKES_REQUEST",E="HOME/FETCH_LIKES_SUCCESS",h="HOME/FETCH_LIKES_FAILURE",p="HOME/FETCH_DISCOUNTS_REQUEST",b="HOME/FETCH_DISCOUNTS_SUCCESS",m="HOME/FETCH_DISCOUNTS_FAILURE",S={fetchLikes:function(){return function(e,t){var n=t().home.likes.pageCount+1;return e({types:[O,E,h],shouldCallAPI:function(){return!0},callAPI:function(){return Object(c.a)(u.a.getProductList(o,n,d))},schema:i.c})}},fetchDiscounts:function(){return function(e,t){return e({types:[p,b,m],shouldCallAPI:function(e){return!0},callAPI:function(){return Object(c.a)(u.a.getProductList(s,1,l))},schema:i.c})}}};t.a=Object(a.c)({likes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.likes,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!0});case E:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,pageCount:e.pageCount+1,ids:e.ids.concat(t.response.ids)});case h:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1});default:return e}},discounts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.discounts,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!0});case b:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1,ids:t.response.ids});case m:return Object(r.a)(Object(r.a)({},e),{},{isFetching:!1});default:return e}}});var g=function(e){return e.home.likes.ids.map((function(t){return e.entities.products[t]}))},j=function(e){return e.home.discounts.ids.map((function(t){return e.entities.products[t]}))},R=function(e){return e.home.likes.pageCount},C=function(e){return e.home.likes.isFetching}},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return m})),n.d(t,"f",(function(){return S}));var r=n(1),c=n(30),u=n(13),i=n(12),a=n(4),o=n(5),s={quantity:1,isShowTip:!1,isLoading:!1},d="PURCHASE/SET_ORDER_QUANTITY",l="PURCHASE/HIDE_TIP",f="PURCHASE/SUBMIT_ORDER_REQUEST",O="PURCHASE/SUBMIT_ORDER_SUCCESS",E="PURCHASE/SUBMIT_ORDER_REQUEST",h={setOrderQuantity:function(e){return{type:d,quantity:e}},hideTip:function(){return{type:l}},submitOrder:function(e){return function(t,n){t({type:f});var r=Object(u.b)(n(),e),c=n().purchase.quantity,s=(r.currentPrice*c).toFixed(1),d="".concat(c,"\u5f20 | \u603b\u4ef7\uff1a\uffe5").concat(s),l=r.validityPeriod,h={statusText:"\u5f85\u6d88\u8d39",orderPicUrl:r.picture,channel:r.detail.category,title:"".concat(r.shop,":").concat(r.product),text:[d,l],type:i.a.AVAILABLE,time:Date.now()};return Object(a.c)(o.a.addOrder(),h).then((function(){t({type:O})})).catch((function(){t({type:E})}))}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(r.a)(Object(r.a)({},e),{},{quantity:t.quantity});case l:return Object(r.a)(Object(r.a)({},e),{},{isShowTip:!1});case f:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!0});case O:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1,isShowTip:!0});case E:return Object(r.a)(Object(r.a)({},e),{},{isLoading:!1});default:return e}};var p=function(e){return e.purchase.quantity},b=function(e){return e.purchase.isShowTip},m=function(e,t){return Object(u.b)(e,t)},S=Object(c.a)([m,p],(function(e,t){return e?(e.currentPrice*t).toFixed(1):0}))},60:function(e,t,n){e.exports=n(91)},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),u=n(25),i=n.n(u),a=n(21),o=n(6),s=n(56),d=n(54),l=n(58),f=n(15),O=function(e,t){var n,r=t.id,c=t.name,u={},i=[];return Array.isArray(e)?e.forEach((function(e){u[e[r]]=e,i.push(e[r])})):(u[e[r]]=e,i.push(e[r])),n={},Object(f.a)(n,c,u),Object(f.a)(n,"ids",i),n};var E=n(13),h=n(20),p=n(29),b=n(12),m=n(14),S=Object(m.a)("comments"),g=Object(o.c)({products:E.a,shops:h.a,keywords:p.a,orders:b.c,comments:S}),j=n(1),R={error:null},C="APP/CLEAR_ERROR",_={clearError:function(){return{type:C}}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.error;return n===C?Object(j.a)(Object(j.a)({},e),{},{error:null}):r?Object(j.a)(Object(j.a)({},e),{},{error:r}):e},T=function(e){return e.app.error},y=n(26),A=n(51),U=n(37),I=n(52),D=n(38),F=n(39),w=Object(o.c)({entities:g,app:v,login:y.b,user:F.b,home:A.a,detail:U.b,purchase:I.b,search:D.b}),H=(Object(d.createLogger)(),Object(o.d)(w,Object(o.a)(s.a,(function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){var c=r.types,u=r.schema,i=r.callAPI,a=r.shouldCallAPI,o=void 0===a?function(){return!0}:a,s=r.payload,d=void 0===s?{}:s;if(!c)return e(r);if(!Array.isArray(c)||3!==c.length||!c.every((function(e){return"string"===typeof e})))throw new Error("Expected an array of three string types.");if("function"!==typeof i)throw new Error("Expected callAPI to be a function.");if(o(n())){var f=Object(l.a)(c,3),E=f[0],h=f[1],p=f[2];return t(Object.assign({},d,{type:E})),i().then((function(e){return t(Object.assign({},d,{response:u?O(e,u):e,type:h}))}),(function(e){return t(Object.assign({},d,{error:e,type:p}))}))}}}})))),P=(n(85),n(16)),L=n(17),M=n(19),N=n(18),k=n(31),x=n(3),Q=(n(86),n(87),function(e){Object(M.a)(n,e);var t=Object(N.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(L.a)(n,[{key:"render",value:function(){var e=this.props.msg;return c.a.createElement("div",{className:"error-toast"},c.a.createElement("div",{className:"error-toast__text"},e))}},{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout((function(){e.props.clearError()}),3e3)}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}}]),n}(r.Component)),K=n(59),B=["children","logged"],q=function(e){Object(M.a)(n,e);var t=Object(N.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(L.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.logged,r=Object(K.a)(e,B);return c.a.createElement(x.b,Object.assign({},r,{render:function(e){var r=e.location;return n?t:c.a.createElement(x.a,{to:{pathname:"/login",state:{from:r}}})}}))}}]),n}(r.Component),Y=Object(a.b)((function(e){return{logged:Object(y.c)(e)}}),null)(q);function W(e){return function(t){Object(M.a)(r,t);var n=Object(N.a)(r);function r(e){var t;return Object(P.a)(this,r),(t=n.call(this,e)).state={Comp:null},t}return Object(L.a)(r,[{key:"componentDidMount",value:function(){var t=this;e().then((function(e){t.setState({Comp:e.default})}))}},{key:"render",value:function(){var e=this.state.Comp;return e?c.a.createElement(e,this.props):null}}]),r}(r.Component)}var G=W((function(){return Promise.all([n.e(4),n.e(3)]).then(n.bind(null,152))})),V=W((function(){return n.e(5).then(n.bind(null,153))})),J=W((function(){return n.e(8).then(n.bind(null,156))})),X=W((function(){return n.e(6).then(n.bind(null,154))})),z=W((function(){return n.e(9).then(n.bind(null,158))})),Z=W((function(){return n.e(7).then(n.bind(null,155))})),$=W((function(){return n.e(10).then(n.bind(null,157))})),ee=function(e){Object(M.a)(n,e);var t=Object(N.a)(n);function n(){return Object(P.a)(this,n),t.apply(this,arguments)}return Object(L.a)(n,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.appActions.clearError;return c.a.createElement("div",{className:"App"},c.a.createElement(k.a,{basename:"/react-dianping"},c.a.createElement(x.d,null,c.a.createElement(x.b,{path:"/search_result"},c.a.createElement(X,null)),c.a.createElement(x.b,{path:"/search"},c.a.createElement(J,null)),c.a.createElement(Y,{path:"/purchase/:id"},c.a.createElement($,null)),c.a.createElement(x.b,{path:"/detail/:id"},c.a.createElement(V,null)),c.a.createElement(Y,{path:"/user"},c.a.createElement(Z,null)),c.a.createElement(x.b,{path:"/login"},c.a.createElement(z,null)),c.a.createElement(x.b,{path:"/"},c.a.createElement(G,null)))),t&&c.a.createElement(Q,{msg:t,clearError:n}))}}]),n}(c.a.Component),te=Object(a.b)((function(e){return{error:T(e)}}),(function(e){return{appActions:Object(o.b)(_,e)}}))(ee);i.a.render(c.a.createElement(a.a,{store:H},c.a.createElement(te,null)),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.fd15a88c.chunk.js.map