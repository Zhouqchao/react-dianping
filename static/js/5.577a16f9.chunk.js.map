{"version":3,"sources":["components/ProductPrice/index.js","components/BuyButton/index.js","containers/ProductDetail/components/ProductOverview/index.js","containers/ProductDetail/components/ShopInfo/index.js","containers/ProductDetail/components/GroupBuyDetail/index.js","containers/ProductDetail/components/PurchaseNotes/index.js","containers/ProductDetail/index.js","components/Header/index.js"],"names":["ProductPrice","this","props","currentPrice","oldPrice","className","Component","BuyButton","productId","to","ProductOverview","data","id","picture","product","description","src","alt","ShopInfo","url","name","shop","rating","star","distance","phone","address","shopCount","ratingWidth","href","style","width","GroupBuyDetail","detail","category","products","remark","colSpan","map","index","quantity","price","key","PurchaseNotes","purchaseNotes","validityPeriod","title","content","ProductDetail","handleBack","e","preventDefault","history","goBack","relatedShop","match","params","detailActions","fetchShopById","nearestShop","fetchProduct","preProps","shopIds","length","Header","onBack","Fragment","withRouter","connect","state","getProduct","getRelatedShop","dispatch","bindActionCreators","actions","onClick"],"mappings":"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","file":"static/js/5.577a16f9.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass ProductPrice extends Component {\n  render() {\n    const { currentPrice, oldPrice } = this.props;\n\n    return (\n      <div className=\"product-price\">\n        <span className=\"product__current-price\">{currentPrice}</span>\n        <span className=\"product__old-price\">{oldPrice}</span>\n      </div>\n    );\n  }\n}\n\nexport default ProductPrice;\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./style.css\";\n\nclass BuyButton extends Component {\n  render() {\n    const { className, productId } = this.props;\n    return (\n      <Link to={`/purchase/${productId}`} className={`buy-button ${className}`}>\n        立即购买\n      </Link>\n    );\n  }\n}\n\nexport default BuyButton;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\nimport ProductPrice from \"../../../../components/ProductPrice\";\nimport BuyButton from \"../../../../components/BuyButton\";\n\nclass ProductOverview extends Component {\n  render() {\n    const {\n      id,\n      picture,\n      product,\n      description,\n      currentPrice,\n      oldPrice,\n    } = this.props.data;\n\n    return (\n      <div className=\"product-overview\">\n        <div className=\"product-overview__img-wrapper\">\n          <img className=\"product-overview__img\" src={picture} alt={product} />\n          <div className=\"product-overview__content\">\n            <h4 className=\"product-overview__title\">{product}</h4>\n            <p className=\"product-overview__description\">{description}</p>\n          </div>\n        </div>\n        <div className=\"product-overview__buy\">\n          <ProductPrice currentPrice={currentPrice} oldPrice={oldPrice} />\n          <BuyButton className=\"product-overview__btn--buy\" productId={id} />\n        </div>\n        <ul className=\"product-overview__advantages\">\n          <li>\n            <i />\n            <span>随时可退</span>\n          </li>\n          <li>\n            <i />\n            <span>过期自动退</span>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default ProductOverview;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass ShopInfo extends Component {\n  render() {\n    const {\n      url,\n      shop: name,\n      star: rating,\n      distance = \">100km\",\n      phone,\n      address,\n      shopCount\n    } = this.props.data;\n    const ratingWidth = (rating / 50) * 100 + \"%\";\n\n    return (\n      <div className=\"shop-info\">\n        <div className=\"shop-info__header\">\n          <h5 className=\"shop-info__title\">适用商户({shopCount})</h5>\n          <span className=\"shop-info__more\"></span>\n        </div>\n        <div className=\"shop-info__content\">\n          <a href={url} className=\"shop-info__link\">\n            <div className=\"shop-info__detail\">\n              <p className=\"shop-info__name\">{name}</p>\n              <div className=\"shop-info__rating\">\n                <i className=\"shop-info__stars\">\n                  <i\n                    className=\"shop-info__stars--red\"\n                    style={{ width: ratingWidth }}\n                  ></i>\n                </i>\n              </div>\n              <span className=\"shop-info__distance\">{distance}</span>\n            </div>\n            <a href={`tel:${phone}`} className=\"shop-info__phone\">\n              <i></i>\n            </a>\n          </a>\n        </div>\n        <div className=\"shop-info__address-wrapper\">\n          <i className=\"shop-info__address-icon\"></i>\n          <span className=\"shop-info__address\">{address}</span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ShopInfo;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass GroupBuyDetail extends Component {\n  render() {\n    const {\n      detail: { category, products, remark },\n      oldPrice,\n      currentPrice\n    } = this.props.data;\n\n    return (\n      <div className=\"buy-detail\">\n        <div className=\"buy-detail__header\">\n          <span className=\"buy-detail__title\">团购详情</span>\n          <i className=\"buy-detail__title-icon\"></i>\n        </div>\n        <div className=\"buy-detail__content\">\n          <table className=\"buy-detail__table\">\n            <thead>\n              <tr>\n                <th colSpan=\"3\">{category}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {products.map(({ name, quantity, price }, index) => (\n                <tr key={index}>\n                  <td>{name}</td>\n                  <td>{quantity}</td>\n                  <td>{price}</td>\n                </tr>\n              ))}\n              <tr>\n                <td></td>\n                <td>最高价值</td>\n                <td>{oldPrice}元</td>\n              </tr>\n              <tr>\n                <td></td>\n                <td>团购价</td>\n                <td>{currentPrice}元</td>\n              </tr>\n            </tbody>\n          </table>\n          <p className=\"buy-detail__remark\">{remark}</p>\n          <div className=\"buy-detail__more\">\n            <span>更多图文详情</span>\n            <span className=\"buy-detail__notice\">\n              （建议Wifi环境下打开,土豪请随意）\n            </span>\n            <i className=\"buy-detail__arrow\"></i>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default GroupBuyDetail;\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass PurchaseNotes extends Component {\n  render() {\n    const { purchaseNotes, validityPeriod } = this.props.data;\n\n    return (\n      <div className=\"purchase-notes\">\n        <div className=\"purchase-notes__header\">\n          <span className=\"purchase-notes__title\">购买须知</span>\n          <i className=\"purchase-notes__title-icon\"></i>\n        </div>\n        <div className=\"purchase-notes__content\">\n          <dl className=\"purchase-notes__item\">\n            <dt className=\"purchase-notes__item-title\">有效期</dt>\n            <dd>\n              <p className=\"purchase-notes__item-listitem\">{validityPeriod}</p>\n            </dd>\n          </dl>\n          {purchaseNotes.map(({ title, content }, index) => (\n            <dl key={index} className=\"purchase-notes__item\">\n              <dt className=\"purchase-notes__item-title\">{title}</dt>\n              <dd>\n                <p className=\"purchase-notes__item-listitem\">{content}</p>\n              </dd>\n            </dl>\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PurchaseNotes;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport \"./style.css\";\nimport ProductOverview from \"./components/ProductOverview\";\nimport ShopInfo from \"./components/ShopInfo\";\nimport GroupBuyDetail from \"./components/GroupBuyDetail\";\nimport PurchaseNotes from \"./components/PurchaseNotes\";\nimport Header from \"../../components/Header\";\nimport BuyButton from \"../../components/BuyButton\";\nimport {\n  getProduct,\n  getRelatedShop,\n  actions\n} from \"../../redux/modules/detail\";\nimport { bindActionCreators } from \"redux\";\n\nclass ProductDetail extends Component {\n  handleBack = e => {\n    e.preventDefault();\n  };\n  componentDidMount() {\n    const { product, relatedShop } = this.props;\n    const { id } = this.props.match.params;\n\n    if (!product) {\n      this.props.detailActions.fetchProduct(id);\n    } else if (!relatedShop) {\n      this.props.detailActions.fetchShopById(product.nearestShop);\n    }\n  }\n  componentDidUpdate(preProps) {\n    const { product } = this.props;\n    // 第一次获取到产品详情时，需要继续获取关联的店铺信息\n    if (!preProps.product && this.props.product) {\n      this.props.detailActions.fetchShopById(product.nearestShop);\n    }\n  }\n  handleBack = () => {\n    this.props.history.goBack();\n  };\n  render() {\n    const { product, relatedShop } = this.props;\n    const shopCount = product ? product.shopIds.length : 0;\n\n    return (\n      <div className=\"product-detail\">\n        <Header className=\"gray\" title=\"团购详情\" onBack={this.handleBack} />\n        {product && <ProductOverview data={product} />}\n        {relatedShop && <ShopInfo data={{ ...relatedShop, shopCount }} />}\n        {product && (\n          <React.Fragment>\n            <GroupBuyDetail data={product} />\n            <PurchaseNotes data={product} />\n            <BuyButton\n              productId={product.id}\n              className=\"product-detail__buy-button\"\n            />\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state, props) => {\n  const { id: productId } = props.match.params;\n  return {\n    product: getProduct(state, productId),\n    relatedShop: getRelatedShop(state, productId)\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  detailActions: bindActionCreators(actions, dispatch)\n});\n\nexport default withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(ProductDetail)\n);\n","import React, { Component } from \"react\";\nimport \"./style.css\";\n\nclass Header extends Component {\n  render() {\n    const { className, title, onBack } = this.props;\n\n    return (\n      <div className=\"base-header\">\n        <span\n          className={`base-header__back ${className}`}\n          onClick={onBack}\n        >\n          返回\n        </span>\n        <h2 className=\"base-header__title\">{title}</h2>\n      </div>\n    );\n  }\n}\n\nexport default Header;\n"],"sourceRoot":""}